# ============================================
# Terraform Environment Variables
# ============================================
#
# INSTRUCTIONS:
# 1. Copy this file: cp .env.example .env
# 2. Update the values below with your specific configuration
# 3. .env will be ignored by git (see .gitignore)
# 4. Run ./setup-prerequisites.sh to create all required GCP prerequisites
# 5. Scripts automatically export all variables using 'set -a; source .env; set +a'
# 6. No 'export' keyword needed - all variables are auto-exported
#
# For CI/CD: Set these as GitHub Secrets (without TF_VAR_ prefix in secret names)
#
# ============================================
# REQUIRED SECRETS
# ============================================

# GCP Project ID
# Used by: All modules
# Example: "my-gcp-project-123456"
TF_VAR_project_id="my-gcp-project-123456"

# Base domain for the public plants application
# Used by: 02-services (for DNS records)
# Example: "plants.example.com"
TF_VAR_base_domain="plants.example.com"

# Admin domain for the admin panel
# Used by: 02-services (for DNS records)
# Example: "admin.plants.example.com"
TF_VAR_admin_domain="admin.plants.example.com"

# ============================================
# REQUIRED ONE-TIME PREREQUISITES
# ============================================
# These resources must be created ONCE before running Terraform.
# Run ./setup-prerequisites.sh to create all of these automatically.
#
# Manual commands are shown below if you prefer to create them individually.
# These resources persist across Terraform destroy/apply cycles (~$0.21/month).

# GCS bucket name for Terraform state
# Must be created manually before first deployment
# Command: gcloud storage buckets create gs://YOUR-BUCKET-NAME --location=YOUR-REGION
# Used by: All modules (backend configuration)
# Example: "my-project-terraform-state"
TF_VAR_state_bucket_name="my-project-terraform-state"

# Cloud DNS managed zone name
# Must be created manually before deployment
# Command: gcloud dns managed-zones create ZONE-NAME --dns-name="your-domain.com." --description="Description"
# Used by: 02-services (for creating DNS records)
# Example: "my-plants-zone"
TF_VAR_dns_zone_name="my-plants-zone"

# Certificate Manager SSL certificate name
# Must be created manually before deployment (see setup-prerequisites.sh)
# Used by: 02-services (for HTTPS load balancer)
# Example: "my-regional-cert"
TF_VAR_ssl_cert_name="my-regional-cert"

# Proxy-only subnet name for load balancer
# Must be created manually before deployment
# Command: gcloud compute networks subnets create SUBNET-NAME --purpose=REGIONAL_MANAGED_PROXY --role=ACTIVE --region=YOUR-REGION --network=default --range=10.129.0.0/23
# Used by: 00-prerequisites (for firewall rules)
# Example: "proxy-only-subnet"
TF_VAR_proxy_subnet_name="proxy-only-subnet"

# ============================================
# OPTIONAL CONFIGURATION (with defaults)
# ============================================

# GCP region for all resources
# Default: europe-west3 (set in all modules' variables.tf)
# Used by: All modules and scripts (deploy.sh, destroy.sh, setup-prerequisites.sh)
# Note: Override if deploying to a different region (e.g., "europe-west10")
# TF_VAR_region="europe-west3"

# VPC network name
# Default: "default" (set in 00-prerequisites/variables.tf)
# Override only if using a custom VPC network
# Used by: Determined in 00-prerequisites, consumed by 01-cluster and 02-services via remote state
# TF_VAR_vpc_network="my-custom-vpc"

# GKE cluster name
# Default: "plants-cluster" (set in 00-prerequisites/variables.tf)
# Override only if you want a different cluster name
# Used by: Determined in 00-prerequisites, consumed by 01-cluster and 02-services via remote state
# TF_VAR_cluster_name="plants-cluster"

# Artifact Registry repository name
# Default: "plants-registry" (set in 00-prerequisites/variables.tf)
# Override only if you want a different registry name
# Used by: Determined in 00-prerequisites, consumed by 02-services via remote state
# TF_VAR_artifact_registry_name="plants-registry"

# ============================================
# DOCKER IMAGES (deploy-time configuration)
# ============================================
# Local Docker images to deploy. Can be either:
# - Local image tags (e.g., "java-be:v1.0.0", "my-app:latest")
# - Docker image IDs (e.g., "d76sa78f6ds", "sha256:abc123...")
#
# The script will:
# - Verify these images exist locally
# - Tag them appropriately for the Artifact Registry
# - Push them to the registry
# - Derive image tags for Terraform (TF_VAR_*_image_tag)
#
# IMPORTANT: Images must include tags (e.g., :latest, :v1.0.0)
# The script will use these exact names in Artifact Registry
# Examples:
#   plants_frontend:latest       - uses 'latest' tag
#   plants_frontend:v1.2.0       - uses specific version tag
#   plants_frontend:abc123       - uses commit SHA as tag

# Java backend image (must include tag)
JAVA_BE_IMAGE="plants_backend:latest"

# Client frontend image (must include tag)
CLIENT_FE_IMAGE="plants_frontend:latest"

# Admin frontend image (must include tag)
ADMIN_FE_IMAGE="plants_admin:latest"

# ============================================
# NOTES
# ============================================
#
# Variable Flow:
# - Secrets (above) are passed as environment variables
# - Shared config (vpc_network, cluster_name, artifact_registry_name) has defaults in 00-prerequisites
# - 00-prerequisites outputs shared config to remote state
# - 01-cluster and 02-services consume from remote state
#
# CI/CD Usage:
# - Set these as GitHub Secrets
# - Scripts will use environment variables directly (no .env file in CI)
# - Docker images should be set from build artifacts (image IDs or tags)
# - Terraform image tags are automatically derived by the script
#
# Multi-User Deployment:
# - Each user creates their own .env file with their values
# - No hardcoded user-specific values in Terraform code
# - Manual prerequisites (DNS, SSL, state bucket) are unique per user
